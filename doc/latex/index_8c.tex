\hypertarget{index_8c}{}\doxysection{src/index.c File Reference}
\label{index_8c}\index{src/index.c@{src/index.c}}
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}index.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}map.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}printing.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}trie.\+h\char`\"{}}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structindex}{index}}
\begin{DoxyCompactList}\small\item\em Reference to the index. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structsearch__result}{search\+\_\+result}}
\begin{DoxyCompactList}\small\item\em Reference to a single search result. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}} $\ast$ \mbox{\hyperlink{index_8c_a15c3f4ada7b30a21acd6b2210ed9c1f5}{index\+\_\+create}} ()
\begin{DoxyCompactList}\small\item\em Creates a new, empty index. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{index_8c_a6d8b82b7bf3cb576cff3cdd5980a44bb}{index\+\_\+destroy}} (\mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}} $\ast$\mbox{\hyperlink{structindex}{index}})
\begin{DoxyCompactList}\small\item\em Destroys the given index. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{index_8c_aade55cdfbab2ca4d4f6db280b19df32c}{index\+\_\+add\+\_\+document}} (\mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}} $\ast$\mbox{\hyperlink{main_8c_aee6bc6a939d52a07b96cc6198efb5c93}{idx}}, char $\ast$document\+\_\+name, \mbox{\hyperlink{list_8h_a15376354e4e8b4f1732e9df17f30786c}{list\+\_\+t}} $\ast$words)
\begin{DoxyCompactList}\small\item\em Adds a new document to the index. \end{DoxyCompactList}\item 
\mbox{\hyperlink{index_8h_aaeb1b5c625369e319aace6d7e7d6a4b4}{search\+\_\+result\+\_\+t}} $\ast$ \mbox{\hyperlink{index_8c_ab938b53cbb5fa24f551ef538623f0bee}{index\+\_\+find}} (\mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}} $\ast$\mbox{\hyperlink{main_8c_aee6bc6a939d52a07b96cc6198efb5c93}{idx}}, const char $\ast$query)
\begin{DoxyCompactList}\small\item\em Searches the index for a query. \end{DoxyCompactList}\item 
char $\ast$ \mbox{\hyperlink{index_8c_ab14904bb76409708cf5e5b83b431028c}{autocomplete}} (\mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}} $\ast$\mbox{\hyperlink{main_8c_aee6bc6a939d52a07b96cc6198efb5c93}{idx}}, char $\ast$input, size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Returns the most similar word to the given input. \end{DoxyCompactList}\item 
char $\ast$$\ast$ \mbox{\hyperlink{index_8c_a529bbacc890ed18d1ed58ccd306019ec}{result\+\_\+get\+\_\+content}} (\mbox{\hyperlink{index_8h_aaeb1b5c625369e319aace6d7e7d6a4b4}{search\+\_\+result\+\_\+t}} $\ast$res)
\begin{DoxyCompactList}\small\item\em Returns the content of the current document. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{index_8c_a3d9ee29108022ec86eb8f9be81ef49c9}{result\+\_\+get\+\_\+content\+\_\+length}} (\mbox{\hyperlink{index_8h_aaeb1b5c625369e319aace6d7e7d6a4b4}{search\+\_\+result\+\_\+t}} $\ast$res)
\begin{DoxyCompactList}\small\item\em Get the number of words in the current document. \end{DoxyCompactList}\item 
\mbox{\hyperlink{index_8h_abd9d25cb8a25d67036a1494de7b97f81}{search\+\_\+hit\+\_\+t}} $\ast$ \mbox{\hyperlink{index_8c_afdb0bc321c8e8b6fe5937435cb89729e}{result\+\_\+next}} (\mbox{\hyperlink{index_8h_aaeb1b5c625369e319aace6d7e7d6a4b4}{search\+\_\+result\+\_\+t}} $\ast$res)
\begin{DoxyCompactList}\small\item\em Get the next word in the result. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{index_8c_ab14904bb76409708cf5e5b83b431028c}\label{index_8c_ab14904bb76409708cf5e5b83b431028c}} 
\index{index.c@{index.c}!autocomplete@{autocomplete}}
\index{autocomplete@{autocomplete}!index.c@{index.c}}
\doxysubsubsection{\texorpdfstring{autocomplete()}{autocomplete()}}
{\footnotesize\ttfamily char$\ast$ autocomplete (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}} $\ast$}]{idx,  }\item[{char $\ast$}]{input,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Returns the most similar word to the given input. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em idx} & The index containing searchable words. \\
\hline
\mbox{\texttt{ in,out}}  & {\em input} & A partial string to complete. \\
\hline
\mbox{\texttt{ in}}  & {\em size} & The length of the input string, excluding the null-\/terminator. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
char$\ast$ A null-\/terminated string containing the word closest to the input. N\+U\+LL if no word is found.
\end{DoxyReturn}
Completes a word starting with the string input. The return value should be the whole word and must be null-\/terminated. \mbox{\Hypertarget{index_8c_aade55cdfbab2ca4d4f6db280b19df32c}\label{index_8c_aade55cdfbab2ca4d4f6db280b19df32c}} 
\index{index.c@{index.c}!index\_add\_document@{index\_add\_document}}
\index{index\_add\_document@{index\_add\_document}!index.c@{index.c}}
\doxysubsubsection{\texorpdfstring{index\_add\_document()}{index\_add\_document()}}
{\footnotesize\ttfamily void index\+\_\+add\+\_\+document (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}} $\ast$}]{idx,  }\item[{char $\ast$}]{document\+\_\+name,  }\item[{\mbox{\hyperlink{list_8h_a15376354e4e8b4f1732e9df17f30786c}{list\+\_\+t}} $\ast$}]{words }\end{DoxyParamCaption})}



Adds a new document to the index. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em idx} & The index which to add the new document. \\
\hline
\mbox{\texttt{ in}}  & {\em document\+\_\+name} & The name of the document being added. \\
\hline
\mbox{\texttt{ in}}  & {\em words} & A linked list containing all the words and special characters in the document.\\
\hline
\end{DoxyParams}
The function adds the content of a new document to the index. The name of the document is not necessarily required, but could be preserved. It will be deallocated by the caller after the function.

The supplied list of words will be deallocated after this function, but not the words. The callie is responsible for deallocating the words after use. \mbox{\Hypertarget{index_8c_a15c3f4ada7b30a21acd6b2210ed9c1f5}\label{index_8c_a15c3f4ada7b30a21acd6b2210ed9c1f5}} 
\index{index.c@{index.c}!index\_create@{index\_create}}
\index{index\_create@{index\_create}!index.c@{index.c}}
\doxysubsubsection{\texorpdfstring{index\_create()}{index\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}}$\ast$ index\+\_\+create (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Creates a new, empty index. 

\begin{DoxyReturn}{Returns}
Pointer to an index\+\_\+t struct. Returns N\+U\+LL on error.
\end{DoxyReturn}
Allocates memory for the index struct and its members. If the index\+\_\+t struct contains other structures (lists or hashtables etc.) these should be initialized here. \mbox{\Hypertarget{index_8c_a6d8b82b7bf3cb576cff3cdd5980a44bb}\label{index_8c_a6d8b82b7bf3cb576cff3cdd5980a44bb}} 
\index{index.c@{index.c}!index\_destroy@{index\_destroy}}
\index{index\_destroy@{index\_destroy}!index.c@{index.c}}
\doxysubsubsection{\texorpdfstring{index\_destroy()}{index\_destroy()}}
{\footnotesize\ttfamily void index\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}} $\ast$}]{index }\end{DoxyParamCaption})}



Destroys the given index. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em index} & The index to deallocate.\\
\hline
\end{DoxyParams}
The function deallocates all members of the index struct. Any word that are contained in the index, should also be deallocated here (or in another appropriate function). \mbox{\Hypertarget{index_8c_ab938b53cbb5fa24f551ef538623f0bee}\label{index_8c_ab938b53cbb5fa24f551ef538623f0bee}} 
\index{index.c@{index.c}!index\_find@{index\_find}}
\index{index\_find@{index\_find}!index.c@{index.c}}
\doxysubsubsection{\texorpdfstring{index\_find()}{index\_find()}}
{\footnotesize\ttfamily \mbox{\hyperlink{index_8h_aaeb1b5c625369e319aace6d7e7d6a4b4}{search\+\_\+result\+\_\+t}}$\ast$ index\+\_\+find (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{index_8h_abb5b4425f0a8f033e0070de17d3692aa}{index\+\_\+t}} $\ast$}]{idx,  }\item[{const char $\ast$}]{query }\end{DoxyParamCaption})}



Searches the index for a query. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em idx} & The index to search. \\
\hline
\mbox{\texttt{ in}}  & {\em query} & The search string, given as is from the UI. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
search\+\_\+result\+\_\+t$\ast$ A pointer to an iterator for the results.
\end{DoxyReturn}
The function should search the index for the given query. The query can be either a single word, or multiple words separated by spaces.

The function can {\itshape either} search for a continuous sentence, or each word individually. If the function searches for sentences, then it should be an exact match between the query and the result. Otherwise the spaces should be treated as separators between query words.

The function searches for the query accross multiple documents. The return value must handle iteration of all search hits accross all documents.

The query string should be deallocated by the function before returning. \mbox{\Hypertarget{index_8c_a529bbacc890ed18d1ed58ccd306019ec}\label{index_8c_a529bbacc890ed18d1ed58ccd306019ec}} 
\index{index.c@{index.c}!result\_get\_content@{result\_get\_content}}
\index{result\_get\_content@{result\_get\_content}!index.c@{index.c}}
\doxysubsubsection{\texorpdfstring{result\_get\_content()}{result\_get\_content()}}
{\footnotesize\ttfamily char$\ast$$\ast$ result\+\_\+get\+\_\+content (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{index_8h_aaeb1b5c625369e319aace6d7e7d6a4b4}{search\+\_\+result\+\_\+t}} $\ast$}]{res }\end{DoxyParamCaption})}



Returns the content of the current document. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em res} & The result context (iterator). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
char$\ast$$\ast$ An array of char arrays containing the words of the current document. N\+U\+LL if there are no more documents.
\end{DoxyReturn}
Since there are multiple documents in the index, this function returns the content of the document pointed to by the struct. Subsequent calls to this function should return the content for the next document, ie the function should only be called once per document. The function is equivalent to calling a next function for documents. The function returns N\+U\+LL when there are no more documents in the search result. \mbox{\Hypertarget{index_8c_a3d9ee29108022ec86eb8f9be81ef49c9}\label{index_8c_a3d9ee29108022ec86eb8f9be81ef49c9}} 
\index{index.c@{index.c}!result\_get\_content\_length@{result\_get\_content\_length}}
\index{result\_get\_content\_length@{result\_get\_content\_length}!index.c@{index.c}}
\doxysubsubsection{\texorpdfstring{result\_get\_content\_length()}{result\_get\_content\_length()}}
{\footnotesize\ttfamily int result\+\_\+get\+\_\+content\+\_\+length (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{index_8h_aaeb1b5c625369e319aace6d7e7d6a4b4}{search\+\_\+result\+\_\+t}} $\ast$}]{res }\end{DoxyParamCaption})}



Get the number of words in the current document. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em res} & The result context (iterator). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int The length (in number of words) of the current document.
\end{DoxyReturn}
Function returns the length in words of the current document. Length is the number of words that has been tokenized from the original file. This should be the length of the array returned by \mbox{\hyperlink{index_8c_a529bbacc890ed18d1ed58ccd306019ec}{result\+\_\+get\+\_\+content}}. Subsequent calls returns the length of the same document. \mbox{\Hypertarget{index_8c_afdb0bc321c8e8b6fe5937435cb89729e}\label{index_8c_afdb0bc321c8e8b6fe5937435cb89729e}} 
\index{index.c@{index.c}!result\_next@{result\_next}}
\index{result\_next@{result\_next}!index.c@{index.c}}
\doxysubsubsection{\texorpdfstring{result\_next()}{result\_next()}}
{\footnotesize\ttfamily \mbox{\hyperlink{index_8h_abd9d25cb8a25d67036a1494de7b97f81}{search\+\_\+hit\+\_\+t}}$\ast$ result\+\_\+next (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{index_8h_aaeb1b5c625369e319aace6d7e7d6a4b4}{search\+\_\+result\+\_\+t}} $\ast$}]{res }\end{DoxyParamCaption})}



Get the next word in the result. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em res} & The result context (iterator). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
search\+\_\+hit\+\_\+t$\ast$ A pointer to the current search hit. Returns N\+U\+LL when there are no more word hits.
\end{DoxyReturn}
The function should return a \mbox{\hyperlink{index_8h_abd9d25cb8a25d67036a1494de7b97f81}{search\+\_\+hit\+\_\+t}} struct, which represent the current search hit (location and length) in the current document. Subsequent calls to this function advances the iterator. The function is equivalent to a next function for search hits. The function returns N\+U\+LL when there are no more search hits in the current document.

To get the search results of the next document, \mbox{\hyperlink{index_8c_a529bbacc890ed18d1ed58ccd306019ec}{result\+\_\+get\+\_\+content}} must be called first. 